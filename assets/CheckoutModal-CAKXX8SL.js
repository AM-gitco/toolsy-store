import{j as e}from"./ui-BfOL7Pw6.js";import{r as s}from"./router-BXFWiZbc.js";import{B as r}from"./button-CmvG0lOO.js";import{I as t}from"./input-zfUHz5B2.js";import{L as a}from"./label-Dbe54ejA.js";import{a as i,b as o,c,C as l}from"./card-BQXi3xZY.js";import{B as m}from"./badge-D8FtP9-V.js";import{C as d}from"./CurrencyDisplay-BCzKL-MM.js";import{S as n}from"./SubscriptionReceipt-ptagqDc7.js";import{S as p}from"./shopping-cart-CxQptf5P.js";import{c as u,X as x}from"./index-ud4XQfz4.js";import{M as h,P as j,T as g}from"./trash-2-B6gUF_4e.js";import{S as f}from"./search-C-So4q_e.js";import{U as y}from"./user-Dr4rv7sj.js";import{M as b}from"./mail-DefGHly8.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=u("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),v=s.createContext(void 0),w=()=>{const e=s.useContext(v);if(!e)throw new Error("useShoppingCart must be used within a ShoppingCartProvider");return e},_=({children:r})=>{const[t,a]=s.useState([]),i=e=>{a(s=>s.filter(s=>s.product.id!==e))},o={cartItems:t,addToCart:e=>{a(s=>s.find(s=>s.product.id===e.id)?s.map(s=>s.product.id===e.id?{...s,quantity:s.quantity+1}:s):[...s,{product:e,quantity:1}])},removeFromCart:i,updateQuantity:(e,s)=>{s<=0?i(e):a(r=>r.map(r=>r.product.id===e?{...r,quantity:s}:r))},clearCart:()=>{a([])},getTotalItems:()=>t.reduce((e,s)=>e+s.quantity,0),getTotalPrice:()=>t.reduce((e,s)=>e+(s.product.custom_price||s.product.price)*s.quantity,0),isInCart:e=>t.some(s=>s.product.id===e)};return e.jsx(v.Provider,{value:o,children:r})},C=[{id:"prod-1",name:"Perplexity AI",category:"ai-tools",subscription_type:"shared",subscription_period:"1_month",price:1e3,custom_price:null},{id:"prod-2",name:"ChatGPT Plus",category:"ai-tools",subscription_type:"private",subscription_period:"1_month",price:2e3,custom_price:null},{id:"prod-3",name:"Google Pro Plan",category:"productivity",subscription_type:"semi_private",subscription_period:"3_months",price:1500,custom_price:null},{id:"prod-4",name:"Canva Pro",category:"design",subscription_type:"shared",subscription_period:"1_year",price:3e3,custom_price:null},{id:"prod-5",name:"Midjourney",category:"ai-tools",subscription_type:"private",subscription_period:"1_month",price:2500,custom_price:null},{id:"prod-6",name:"Figma Professional",category:"design",subscription_type:"semi_private",subscription_period:"6_months",price:1800,custom_price:null}],S=({isOpen:u,onClose:v,onCompletePurchase:_})=>{const{cartItems:S,updateQuantity:k,removeFromCart:P,addToCart:z}=w(),[q,M]=s.useState(""),[I,F]=s.useState(""),[T,A]=s.useState(!1),[E,D]=s.useState(!1),[L,U]=s.useState(!0),[O,G]=s.useState(""),B=e=>(e.product.custom_price||e.product.price)*e.quantity;return u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:e.jsx("div",{className:"bg-card rounded-2xl shadow-2xl w-full max-w-sm sm:max-w-2xl lg:max-w-4xl max-h-[95vh] sm:max-h-[90vh] overflow-y-auto border border-border",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(p,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-foreground",children:"Checkout"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Enter your details to complete your purchase"})]})]}),e.jsx(r,{variant:"ghost",size:"sm",onClick:v,className:"h-8 w-8 p-0 hover:bg-muted/50",children:e.jsx(x,{className:"w-4 h-4"})})]}),e.jsxs(i,{className:"mb-6",children:[e.jsx(o,{children:e.jsx(c,{className:"text-lg",children:"Order Summary"})}),e.jsx(l,{children:0===S.length?e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No items in cart"}):e.jsxs("div",{className:"space-y-4",children:[S.map(s=>{return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/20 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:s.product.name}),e.jsxs(m,{variant:"outline",className:"text-xs",children:[s.product.subscription_type.replace("_"," ")," - ",(t=s.product.subscription_period,t.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()))]})]}),e.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:s.product.category})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>k(s.product.id,Math.max(0,s.quantity-1)),className:"h-8 w-8 p-0",children:e.jsx(h,{className:"w-3 h-3"})}),e.jsx("span",{className:"w-8 text-center font-medium",children:s.quantity}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>k(s.product.id,s.quantity+1),className:"h-8 w-8 p-0",children:e.jsx(j,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"text-right min-w-[100px]",children:e.jsx(d,{pkrAmount:B(s),size:"sm",className:"font-semibold"})}),e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>P(s.product.id),className:"h-8 w-8 p-0 text-destructive hover:text-destructive hover:bg-destructive/10",children:e.jsx(g,{className:"w-3 h-3"})})]})]},s.product.id);var t}),e.jsx("div",{className:"border-t border-border pt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-foreground",children:"Total:"}),e.jsx(d,{pkrAmount:S.reduce((e,s)=>e+B(s),0),size:"lg",className:"font-bold text-primary"})]})})]})})]}),e.jsxs(i,{className:"mb-6 border-primary/20 bg-gradient-to-br from-primary/5 to-primary/10",children:[e.jsx(o,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(c,{className:"flex items-center gap-2 text-primary",children:[e.jsx(N,{className:"w-5 h-5"}),"Explore More Products"]}),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>U(!L),className:"border-primary/30 text-primary hover:bg-primary/10",children:[L?"Hide":"Show"," Products"]})]})}),L&&e.jsxs(l,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Add more products to your cart without losing your current items"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(f,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(t,{placeholder:"Search products...",value:O,onChange:e=>G(e.target.value),className:"pl-10"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-96 overflow-y-auto",children:C.filter(e=>e.name.toLowerCase().includes(O.toLowerCase())||e.category.toLowerCase().includes(O.toLowerCase())).map(s=>{return e.jsx(i,{className:"hover:shadow-md transition-shadow",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:s.category})]}),e.jsx(m,{variant:"outline",className:"text-xs",children:s.subscription_type.replace("_"," ")})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:(t=s.subscription_period,t.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()))}),e.jsx(d,{pkrAmount:s.price,size:"sm",className:"font-semibold text-sm"})]}),e.jsxs(r,{onClick:()=>z(s),className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",size:"sm",children:[e.jsx(j,{className:"w-3 h-3 mr-1"}),"Add to Cart"]})]})})},s.id);var t})})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs(a,{htmlFor:"fullName",className:"flex items-center gap-2 mb-2",children:[e.jsx(y,{className:"w-4 h-4"}),"Full Name *"]}),e.jsx(t,{id:"fullName",placeholder:"Enter your full name",value:q,onChange:e=>M(e.target.value),className:"bg-muted/20 border-border"})]}),e.jsxs("div",{children:[e.jsxs(a,{htmlFor:"email",className:"flex items-center gap-2 mb-2",children:[e.jsx(b,{className:"w-4 h-4"}),"Email Address *"]}),e.jsx(t,{id:"email",type:"email",placeholder:"Enter your email address",value:I,onChange:e=>F(e.target.value),className:"bg-muted/20 border-border"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"If you're a returning customer, use the same email address to link to your existing account."})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(r,{variant:"outline",onClick:v,className:"flex-1",children:"Cancel"}),e.jsx(r,{onClick:async()=>{if(q.trim()&&I.trim()){D(!0);try{await new Promise(e=>setTimeout(e,1e3)),_({fullName:q,email:I}),A(!0)}catch(e){}finally{D(!1)}}},disabled:!q.trim()||!I.trim()||0===S.length||E,className:"flex-1 bg-primary hover:bg-primary/90 text-primary-foreground",children:E?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"Complete Purchase"]})})]})]})})}),T&&e.jsx(n,{subscription:{id:`sub-${Date.now()}`,start_date:(new Date).toISOString(),expiry_date:new Date(Date.now()+2592e6).toISOString(),auto_renew:!1,notes:"Multi-product purchase",user_auth_code:{user_name:q,user_email:I,code:`USER-${Math.random().toString(36).substr(2,9).toUpperCase()}`},products:S.map(e=>({...e.product,price:e.product.custom_price||e.product.price}))},onClose:()=>{A(!1),v(),M(""),F("")}})]}):null};export{S as C,_ as S,w as u};
