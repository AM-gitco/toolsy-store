import{j as e}from"./ui-BfOL7Pw6.js";import{r as t}from"./router-BXFWiZbc.js";import{m as s}from"./motion-BU2psJSs.js";const r=({src:r,alt:a,className:i="",priority:o=!1,sizes:n="100vw",onLoad:c,onError:l})=>{const[d,m]=t.useState(!1),[u,f]=t.useState(!1),[g,y]=t.useState(!1),j=t.useRef(null);t.useEffect(()=>{const e=new IntersectionObserver(([t])=>{t.isIntersecting&&(f(!0),e.disconnect())},{threshold:.1});return j.current&&e.observe(j.current),()=>e.disconnect()},[]);return e.jsxs("div",{ref:j,className:`relative overflow-hidden ${i}`,children:[!d&&!g&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-200 to-gray-300 animate-pulse"}),g&&e.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-400 text-sm",children:"Failed to load image"})}),u&&!g&&e.jsx(s.img,{src:r,alt:a,className:"w-full h-full object-cover transition-opacity duration-300 "+(d?"opacity-100":"opacity-0"),loading:o?"eager":"lazy",decoding:"async",fetchPriority:o?"high":"low",sizes:n,onLoad:()=>{m(!0),c?.()},onError:()=>{y(!0),l?.()},initial:{opacity:0},animate:{opacity:d?1:0},transition:{duration:.3}})]})};export{r as O};
