import{j as e}from"./ui-BfOL7Pw6.js";import{g as s,f as t,r as a}from"./router-BXFWiZbc.js";import{a as r,C as l,b as i,c as n}from"./card-BQXi3xZY.js";import{B as o}from"./button-CmvG0lOO.js";import{B as m}from"./badge-D8FtP9-V.js";import{u as c}from"./useProductTestimonials-D6if9ZBJ.js";import{a as d}from"./useProducts-CyTGfkJ8.js";import{H as x}from"./Header-CMjDRm3Z.js";import{S as u}from"./Seo-D7pYws-T.js";import{A as h}from"./arrow-left-Tt42aMK4.js";import{S as j}from"./star-sriY0a1s.js";import{F as g}from"./filter-C690s5fq.js";import{C as p}from"./circle-check-big-DcnsFF-J.js";import"./vendor-B5BPFqys.js";import"./index-ud4XQfz4.js";import"./supabase-DlLlES7-.js";import"./charts-AXPLIc8O.js";import"./motion-BU2psJSs.js";import"./toolsy-logo-C0HmbZOG.js";import"./CurrencySelector-Dp-scm2k.js";import"./select-CNwGciQv.js";import"./shield-BPn5TLBB.js";import"./shopping-cart-CxQptf5P.js";function f(){const{productSlug:f}=s(),N=t(),{testimonials:b,loading:v}=c(f),{products:w}=d(),[y,k]=a.useState(null),[C,_]=a.useState("newest"),S=w.find(e=>e.slug===f),R=e=>{const s=["from-blue-500 to-purple-500","from-green-500 to-teal-500","from-orange-500 to-red-500","from-purple-500 to-pink-500","from-cyan-500 to-blue-500","from-emerald-500 to-green-500"];return s[e%s.length]},F=b.filter(e=>null===y||e.rating===y).sort((e,s)=>{switch(C){case"newest":return new Date(s.date).getTime()-new Date(e.date).getTime();case"oldest":return new Date(e.date).getTime()-new Date(s.date).getTime();case"rating":return s.rating-e.rating;default:return 0}}),T=b.length>0?(b.reduce((e,s)=>e+s.rating,0)/b.length).toFixed(1):"0.0",$=[5,4,3,2,1].map(e=>({rating:e,count:b.filter(s=>s.rating===e).length,percentage:b.length>0?b.filter(s=>s.rating===e).length/b.length*100:0}));return v?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(x,{}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading testimonials..."})]})})]}):S?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(u,{title:`${S.name} - Customer Reviews & Testimonials`,description:`Read authentic customer reviews and testimonials for ${S.name}. See what our customers say about their experience.`,keywords:`${S.name} reviews, customer testimonials, user feedback, product reviews`,canonicalPath:`/testimonials/${f}`}),e.jsx(x,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(o,{variant:"outline",onClick:()=>N(`/product/${f}`),className:"mb-4",children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Back to Product"]}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[S.main_image_url&&e.jsx("img",{src:S.main_image_url,alt:S.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:[S.name," Reviews"]}),e.jsx("p",{className:"text-muted-foreground",children:"Customer testimonials and feedback"})]})]})]}),0===b.length?e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(r,{className:"border-2 border-dashed border-muted-foreground/20 bg-muted/5",children:e.jsxs(l,{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center",children:e.jsx(j,{className:"w-10 h-10 text-primary"})}),e.jsx("h2",{className:"text-2xl font-bold mb-3 text-foreground",children:"No Reviews Yet"}),e.jsxs("p",{className:"text-muted-foreground mb-8 text-lg max-w-md mx-auto",children:["Be the first to share your experience with ",S.name,"!"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(o,{onClick:()=>N(`/product/${f}`),size:"lg",className:"bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70",children:"View Product"}),e.jsx(o,{variant:"outline",size:"lg",onClick:()=>window.open("https://wa.me/923415685257","_blank"),children:"Contact Us"})]})]})})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(r,{className:"sticky top-8",children:[e.jsx(i,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5 text-yellow-500"}),"Rating Summary"]})}),e.jsxs(l,{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:T}),e.jsx("div",{className:"flex justify-center mb-2",children:[...Array(5)].map((s,t)=>e.jsx(j,{className:"w-5 h-5 "+(t<Math.round(parseFloat(T))?"fill-yellow-400 text-yellow-400":"text-gray-300")},t))}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Based on ",b.length," review",1!==b.length?"s":""]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Rating Breakdown"}),$.map(({rating:s,count:t,percentage:a})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm w-8",children:[s,"★"]}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-400 h-2 rounded-full transition-all duration-300",style:{width:`${a}%`}})}),e.jsx("span",{className:"text-sm text-muted-foreground w-8",children:t})]},s))]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),"Filter by Rating"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{variant:null===y?"default":"outline",size:"sm",onClick:()=>k(null),className:"w-full justify-start",children:["All Reviews (",b.length,")"]}),[5,4,3,2,1].map(s=>{const t=b.filter(e=>e.rating===s).length;return 0===t?null:e.jsxs(o,{variant:y===s?"default":"outline",size:"sm",onClick:()=>k(s),className:"w-full justify-start",children:[s,"★ (",t,")"]},s)})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Sort by"}),e.jsx("div",{className:"space-y-2",children:[{value:"newest",label:"Newest First"},{value:"oldest",label:"Oldest First"},{value:"rating",label:"Highest Rating"}].map(s=>e.jsx(o,{variant:C===s.value?"default":"outline",size:"sm",onClick:()=>_(s.value),className:"w-full justify-start",children:s.label},s.value))})]})]})]})}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsx("div",{className:"space-y-6",children:F.map((s,t)=>{return e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[s.customer_photo_url?e.jsx("img",{src:s.customer_photo_url,alt:s.name,className:"w-12 h-12 rounded-full object-cover border-2 border-gray-200 shrink-0"}):e.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${R(t)} rounded-full flex items-center justify-center text-white font-semibold shrink-0`,children:(i=s.name,i.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2))}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.name}),s.verified&&e.jsxs(m,{variant:"secondary",className:"text-xs",children:[e.jsx(p,{className:"w-3 h-3 mr-1"}),"Verified Purchase"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((t,a)=>e.jsx(j,{className:"w-4 h-4 "+(a<s.rating?"fill-yellow-400 text-yellow-400":"text-gray-300")},a))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.rating," out of 5 stars"]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"•"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:(a=s.date,new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))})]}),"image"===s.type&&s.testimonial_content_photo_url?e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:s.testimonial_content_photo_url,alt:"Testimonial content",className:"w-full max-w-md rounded-lg border",style:{maxHeight:"400px",objectFit:"contain"}})}):e.jsxs("p",{className:"text-muted-foreground mb-4 leading-relaxed",children:['"',s.content,'"']}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.role&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium",children:"Role:"}),s.role]}),s.company&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium",children:"Company:"}),s.company]})]})]})]})})},s.id);var a,i})}),0===F.length&&null!==y&&e.jsx("div",{className:"max-w-xl mx-auto",children:e.jsx(r,{className:"border-2 border-dashed border-muted-foreground/20 bg-muted/5",children:e.jsxs(l,{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-muted-foreground/20 to-muted-foreground/10 flex items-center justify-center",children:e.jsx(j,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2 text-foreground",children:"No Reviews Found"}),e.jsxs("p",{className:"text-muted-foreground mb-6",children:["No reviews found for ",y," star rating."]}),e.jsx(o,{onClick:()=>k(null),variant:"outline",children:"View All Reviews"})]})})})]})]})]})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(x,{}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Product Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"The product you're looking for doesn't exist."}),e.jsxs(o,{onClick:()=>N(-1),children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Back"]})]})})]})}export{f as default};
