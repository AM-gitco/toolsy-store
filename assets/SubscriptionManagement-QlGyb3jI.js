import{j as e}from"./ui-BfOL7Pw6.js";import{r}from"./router-BXFWiZbc.js";import{c as s,u as t,s as a}from"./index-ud4XQfz4.js";import{a as o,b as l,c as n,d as i,C as d}from"./card-BQXi3xZY.js";import{B as c}from"./button-CmvG0lOO.js";import{I as m}from"./input-zfUHz5B2.js";import{L as u}from"./label-Dbe54ejA.js";import{A as x,a as h}from"./alert-DcEmRu5y.js";import{K as p,D as b,d as f,e as g,f as j,g as v,L as N,T as w,a as y,b as _,c as C}from"./dialog-C8oywQGl.js";import{L as k}from"./loader-circle-Lrj5F5Df.js";import{U as S}from"./user-Dr4rv7sj.js";import{M as P}from"./mail-DefGHly8.js";import{B as R}from"./badge-D8FtP9-V.js";import{T as q}from"./textarea-BdeoBvhe.js";import{S as z,c as D,d as A,e as E,f as I}from"./select-CNwGciQv.js";import{C as $}from"./credit-card-C4EvGjIG.js";import{T as L}from"./triangle-alert-DRwjyRUw.js";import{C as F}from"./circle-check-big-DcnsFF-J.js";import{C as M}from"./copy-Bzr4DZ5N.js";import{E as T}from"./eye-off-BaTaP-XJ.js";import{E as O}from"./eye-B88tXCV3.js";import{L as U}from"./lock-BWdudsmc.js";import{R as Y,C as H}from"./refresh-cw-CDKxenGO.js";import{M as K}from"./message-circle-DFpE3xjH.js";import{C as V}from"./clock-XSsOJgEy.js";import{C as B}from"./calendar-CXD7DIWv.js";import"./vendor-B5BPFqys.js";import"./supabase-DlLlES7-.js";import"./charts-AXPLIc8O.js";import"./motion-BU2psJSs.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=s("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),G=s("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),Z=s("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),J=r.createContext(void 0),Q=({children:s})=>{const[o,l]=r.useState(!1),[n,i]=r.useState(!0),[d,c]=r.useState(null),[m,u]=r.useState([]),{toast:x}=t(),h=async e=>{try{i(!0);const{data:r,error:s}=await a.from("user_auth_codes").select("*").eq("code",e).eq("is_active",!0).single();return s||!r?{success:!1,error:"Invalid or expired authentication code"}:(c(r),l(!0),localStorage.setItem("subscription_auth_code",e),await p(r.id),x({title:"Welcome back!",description:`Hello ${r.user_name}, you're now logged in.`}),{success:!0})}catch(r){return{success:!1,error:"An error occurred during sign in"}}finally{i(!1)}},p=async e=>{try{const{data:r,error:s}=await a.from("user_subscriptions").select("\n          id,\n          user_auth_code_id,\n          product_id,\n          subscription_type,\n          subscription_period,\n          status,\n          start_date,\n          expiry_date,\n          auto_renew,\n          notes,\n          custom_price,\n          username,\n          password,\n          currency,\n          created_at,\n          updated_at,\n          product:products(\n            id,\n            name,\n            slug,\n            description,\n            main_image_url,\n            category\n          )\n        ").eq("user_auth_code_id",e).order("expiry_date",{ascending:!0});if(s)return;u(r||[])}catch(r){}},b=async()=>{d&&await p(d.id)};return r.useEffect(()=>{(async()=>{try{const e=localStorage.getItem("subscription_auth_code");if(e){(await h(e)).success||localStorage.removeItem("subscription_auth_code")}}catch(e){localStorage.removeItem("subscription_auth_code")}finally{i(!1)}})()},[]),r.useEffect(()=>{if(!o||!d)return;const e=setInterval(()=>{b()},3e5);return()=>clearInterval(e)},[o,d]),e.jsx(J.Provider,{value:{isAuthenticated:o,isLoading:n,userAuthCode:d,subscriptions:m,signIn:h,signOut:()=>{c(null),l(!1),u([]),localStorage.removeItem("subscription_auth_code"),x({title:"Signed out",description:"You have been successfully signed out."})},refreshSubscriptions:b},children:s})},X=()=>{const e=r.useContext(J);if(void 0===e)throw new Error("useSubscriptionAuth must be used within a SubscriptionAuthProvider");return e},ee=()=>{const[s,t]=r.useState(""),[a,b]=r.useState(!1),[f,g]=r.useState(""),{signIn:j}=X();return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-card/30 to-background p-4 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-brand-teal/10 rounded-full blur-3xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-brand-purple/5 rounded-full blur-3xl animate-pulse delay-500"})]}),e.jsxs(o,{className:"w-full max-w-md bg-card/95 backdrop-blur-md shadow-2xl border border-border/50 relative z-10",children:[e.jsxs(l,{className:"text-center",children:[e.jsxs("div",{className:"mx-auto w-16 h-16 bg-gradient-to-br from-primary/20 to-brand-teal/20 rounded-full flex items-center justify-center mb-6 shadow-lg border border-primary/30 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 to-brand-teal/10 rounded-full animate-pulse"}),e.jsx(p,{className:"w-8 h-8 text-primary relative z-10 drop-shadow-[0_0_8px_rgba(34,197,94,0.4)]"})]}),e.jsx(n,{className:"text-3xl font-bold bg-gradient-to-r from-primary via-brand-teal to-brand-purple bg-clip-text text-transparent",children:"Subscription Dashboard"}),e.jsx(i,{className:"text-muted-foreground mt-2 text-base",children:"Enter your authentication code to access your subscriptions"})]}),e.jsxs(d,{children:[e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),s.trim()){b(!0),g("");try{const e=await j(s.trim());e.success||g(e.error||"Invalid authentication code")}catch(r){g("An error occurred. Please try again.")}finally{b(!1)}}else g("Please enter your authentication code")},className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(u,{htmlFor:"code",className:"text-foreground font-medium text-sm",children:"Authentication Code"}),e.jsx(m,{id:"code",type:"text",placeholder:"Enter your code",value:s,onChange:e=>t(e.target.value),disabled:a,className:"text-center font-mono text-lg bg-input border-border focus:border-primary focus:ring-primary/50 focus:ring-2 transition-all duration-300 text-foreground placeholder:text-muted-foreground"})]}),f&&e.jsx(x,{variant:"destructive",className:"border-destructive/50 bg-destructive/10",children:e.jsx(h,{className:"text-destructive-foreground",children:f})}),e.jsxs(c,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-brand-teal hover:from-primary/90 hover:to-brand-teal/90 text-primary-foreground font-medium py-3 shadow-lg hover:shadow-xl transition-all duration-300 relative overflow-hidden group",disabled:a||!s.trim(),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 to-brand-teal/20 scale-0 group-hover:scale-100 transition-transform duration-300"}),a?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-4 h-4 mr-2 animate-spin relative z-10"}),e.jsx("span",{className:"relative z-10",children:"Signing In..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"w-4 h-4 mr-2 relative z-10"}),e.jsx("span",{className:"relative z-10",children:"Access Dashboard"})]})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-border/50",children:e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[e.jsx("p",{className:"mb-3",children:"Need help accessing your account?"}),e.jsxs(c,{variant:"link",className:"p-0 h-auto text-sm text-primary hover:text-brand-teal transition-colors duration-300 group",onClick:()=>window.open("mailto:support@toolsy.store?subject=Subscription Access Help"),children:[e.jsx(P,{className:"w-4 h-4 mr-1 group-hover:scale-110 transition-transform duration-300"}),"Contact Support"]})]})})]})]})]})},re=[{value:"not-working",label:"Product not working as expected"},{value:"technical-issues",label:"Technical issues or bugs"},{value:"not-suitable",label:"Product not suitable for my needs"},{value:"duplicate-purchase",label:"Duplicate purchase"},{value:"billing-error",label:"Billing error"},{value:"change-of-mind",label:"Change of mind"},{value:"other",label:"Other reason"}],se=({subscription:s,isOpen:o,onClose:l})=>{const[n,i]=r.useState(""),[d,m]=r.useState(""),[u,p]=r.useState(!1),[N,w]=r.useState(""),{toast:y}=t(),_=()=>{u||(i(""),m(""),w(""),l())};return e.jsx(b,{open:o,onOpenChange:_,children:e.jsxs(f,{className:"w-[95vw] max-w-sm sm:max-w-lg lg:max-w-2xl max-h-[90vh] overflow-y-auto bg-background border-border",children:[e.jsxs(g,{children:[e.jsxs(j,{className:"flex items-center gap-2 text-foreground",children:[e.jsx($,{className:"w-5 h-5"}),"Request Refund"]}),e.jsx(v,{className:"text-muted-foreground",children:"Submit a refund request for your subscription. Our team will review your request within 24-48 hours."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-muted/20 rounded-lg p-4 border border-border/50",children:[e.jsx("h3",{className:"font-semibold mb-3 text-foreground",children:"Subscription Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Product:"}),e.jsx("span",{className:"font-medium text-foreground",children:s.product?.name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Plan Type:"}),e.jsx(R,{variant:"outline",className:"capitalize border-border text-foreground",children:s.subscription_type.replace("_"," ")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Status:"}),e.jsx(R,{className:(e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"expiring_soon":return"bg-yellow-100 text-yellow-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(s.status),children:s.status.replace("_"," ")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Expires:"}),e.jsx("span",{className:"text-sm text-foreground",children:new Date(s.expiry_date).toLocaleDateString()})]})]})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),n)if(d.trim()){p(!0),w("");try{const{data:e,error:r}=await a.from("subscription_refund_requests").insert({subscription_id:s.id,user_auth_code_id:s.user_auth_code_id,reason:n,description:d.trim()}).select().single();if(r)throw r;y({title:"Refund Request Submitted",description:"Your refund request has been submitted and is under review. You'll receive an email confirmation shortly."}),i(""),m(""),l()}catch(r){w("Failed to submit refund request. Please try again or contact support.")}finally{p(!1)}}else w("Please provide a detailed description");else w("Please select a reason for the refund request")},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block text-foreground",children:"Reason for Refund *"}),e.jsxs(z,{value:n,onValueChange:i,children:[e.jsx(D,{className:"bg-background border-border text-foreground",children:e.jsx(A,{placeholder:"Select a reason"})}),e.jsx(E,{className:"bg-background border-border",children:re.map(r=>e.jsx(I,{value:r.value,className:"text-foreground focus:bg-muted",children:r.label},r.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block text-foreground",children:"Detailed Description *"}),e.jsx(q,{value:d,onChange:e=>m(e.target.value),placeholder:"Please provide detailed information about why you're requesting a refund. Include any specific issues, error messages, or circumstances that led to this request.",rows:4,maxLength:1e3,className:"bg-background border-border text-foreground placeholder:text-muted-foreground"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[d.length,"/1000 characters"]})]}),N&&e.jsxs(x,{variant:"destructive",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx(h,{children:N})]}),e.jsxs(x,{children:[e.jsx(L,{className:"h-4 w-4"}),e.jsxs(h,{children:[e.jsx("strong",{children:"Important:"})," Refund requests are reviewed on a case-by-case basis. Please ensure you've provided all necessary details to help us process your request quickly. You'll receive an email confirmation once your request is submitted."]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(c,{type:"button",variant:"outline",onClick:_,disabled:u,children:"Cancel"}),e.jsx(c,{type:"submit",disabled:u||!n||!d.trim(),children:u?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Submit Request"]})})]})]})]})]})})},te=({username:s,password:a,className:o=""})=>{const[l,n]=r.useState(!1),{toast:i}=t(),d=async(e,r)=>{try{await navigator.clipboard.writeText(e),i({title:"Copied!",description:`${r} copied to clipboard`})}catch(s){i({title:"Error",description:"Failed to copy to clipboard",variant:"destructive"})}};return s||a?e.jsxs("div",{className:`p-3 bg-muted/20 rounded-lg border border-border/50 ${o}`,children:[e.jsxs("h4",{className:"text-sm font-medium text-foreground mb-3 flex items-center",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Login Credentials"]}),e.jsxs("div",{className:"space-y-3",children:[s&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Username"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{value:s,readOnly:!0,className:"font-mono text-sm bg-muted/30 border-border/50"}),e.jsx(c,{size:"sm",variant:"outline",onClick:()=>d(s,"Username"),className:"shrink-0",children:e.jsx(M,{className:"w-3 h-3"})})]})]}),a&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Password"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{type:l?"text":"password",value:a,readOnly:!0,className:"font-mono text-sm bg-muted/30 border-border/50"}),e.jsx(c,{size:"sm",variant:"outline",onClick:()=>n(!l),className:"shrink-0",children:l?e.jsx(T,{className:"w-3 h-3"}):e.jsx(O,{className:"w-3 h-3"})}),e.jsx(c,{size:"sm",variant:"outline",onClick:()=>d(a,"Password"),className:"shrink-0",children:e.jsx(M,{className:"w-3 h-3"})})]})]})]}),e.jsxs("div",{className:"mt-3 p-2 bg-yellow-500/10 border border-yellow-500/20 rounded text-xs text-yellow-600 dark:text-yellow-400",children:[e.jsx(U,{className:"w-3 h-3 inline mr-1"}),"Keep these credentials secure and don't share them with others."]})]}):null},ae=({status:r,expiryDate:s,customPrice:t,subscriptionType:a,subscriptionPeriod:o,currency:l="PKR"})=>{const n=(()=>{switch(r){case"active":return{color:"bg-primary/20 text-primary border-primary/30",icon:e.jsx(F,{className:"w-4 h-4"}),text:"Active",bgColor:"bg-primary/5",borderColor:"border-primary/30",timeColor:"text-primary"};case"expiring_soon":return{color:"bg-yellow-500/20 text-yellow-500 border-yellow-500/30",icon:e.jsx(L,{className:"w-4 h-4"}),text:"Expiring Soon",bgColor:"bg-yellow-500/5",borderColor:"border-yellow-500/30",timeColor:"text-yellow-500"};case"expired":return{color:"bg-red-500/20 text-red-500 border-red-500/30",icon:e.jsx(H,{className:"w-4 h-4"}),text:"Expired",bgColor:"bg-red-500/5",borderColor:"border-red-500/30",timeColor:"text-red-500"};case"cancelled":return{color:"bg-muted/20 text-muted-foreground border-muted/30",icon:e.jsx(H,{className:"w-4 h-4"}),text:"Cancelled",bgColor:"bg-muted/5",borderColor:"border-muted/30",timeColor:"text-muted-foreground"};default:return{color:"bg-muted/20 text-muted-foreground border-muted/30",icon:e.jsx(V,{className:"w-4 h-4"}),text:"Unknown",bgColor:"bg-muted/5",borderColor:"border-muted/30",timeColor:"text-muted-foreground"}}})(),i=new Date(s),d=i<new Date,c=Math.ceil((i.getTime()-(new Date).getTime())/864e5);return e.jsxs("div",{className:`p-4 rounded-lg border-2 ${n.bgColor} ${n.borderColor}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs(R,{className:`${n.color} border-0 font-medium`,children:[n.icon,e.jsx("span",{className:"ml-2",children:n.text})]}),!d&&e.jsx("span",{className:`text-sm font-semibold ${n.timeColor}`,children:(()=>{if(d)return"Expired";if(c>=365){const e=Math.floor(c/365);return`${e} year${e>1?"s":""} remaining`}if(c>=30){const e=Math.floor(c/30);return`${e} month${e>1?"s":""} remaining`}return c>0?`${c} day${c>1?"s":""} remaining`:"Expires today"})()})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{className:"font-medium",children:[d?"Expired on":"Expires on"," ",i.toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Price:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"font-semibold text-foreground",children:[l," ",(()=>{if(t)return t.toFixed(2);return(({shared:5,semi_private:10,private:15}[a]||5)*({"1_month":1,"3_months":2.5,"6_months":4.5,"1_year":8,"2_years":14,lifetime:25}[o]||1)).toFixed(2)})()]}),t&&e.jsx("span",{className:"text-xs text-blue-500 bg-blue-50 px-2 py-1 rounded",children:"Custom"})]})]})]})]})},oe=({subscription:r})=>{const s=(()=>{switch(r.status){case"expired":return{color:"bg-red-500/20 text-red-500 border-red-500/30",icon:e.jsx(H,{className:"w-4 h-4"}),text:"Expired",bgColor:"bg-red-500/5",borderColor:"border-red-500/30",timeColor:"text-red-500"};case"cancelled":return{color:"bg-gray-500/20 text-gray-500 border-gray-500/30",icon:e.jsx(H,{className:"w-4 h-4"}),text:"Cancelled",bgColor:"bg-gray-500/5",borderColor:"border-gray-500/30",timeColor:"text-gray-500"};default:return{color:"bg-muted/20 text-muted-foreground border-muted/30",icon:e.jsx(V,{className:"w-4 h-4"}),text:"Unknown",bgColor:"bg-muted/5",borderColor:"border-muted/30",timeColor:"text-muted-foreground"}}})(),t=(()=>{if(!r.refund_requests||0===r.refund_requests.length)return null;const s=r.refund_requests[0];switch(s.status){case"completed":return{color:"bg-green-500/20 text-green-500 border-green-500/30",icon:e.jsx(F,{className:"w-4 h-4"}),text:"Refunded",amount:s.refund_amount};case"approved":return{color:"bg-blue-500/20 text-blue-500 border-blue-500/30",icon:e.jsx(F,{className:"w-4 h-4"}),text:"Refund Approved",amount:s.refund_amount};case"rejected":return{color:"bg-red-500/20 text-red-500 border-red-500/30",icon:e.jsx(H,{className:"w-4 h-4"}),text:"Refund Rejected",amount:null};case"under_review":return{color:"bg-yellow-500/20 text-yellow-500 border-yellow-500/30",icon:e.jsx(V,{className:"w-4 h-4"}),text:"Refund Under Review",amount:null};case"pending":return{color:"bg-orange-500/20 text-orange-500 border-orange-500/30",icon:e.jsx(V,{className:"w-4 h-4"}),text:"Refund Pending",amount:null};default:return null}})(),a=new Date(r.expiry_date),o=new Date(r.start_date);return e.jsxs("div",{className:`p-4 rounded-lg border-2 ${s.bgColor} ${s.borderColor}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs(R,{className:`${s.color} border-0 font-medium`,children:[s.icon,e.jsx("span",{className:"ml-2",children:s.text})]}),t&&e.jsxs(R,{className:`${t.color} border-0 font-medium`,children:[t.icon,e.jsx("span",{className:"ml-2",children:t.text})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{className:"font-medium",children:["Started: ",o.toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{className:"font-medium",children:["Expired: ",a.toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Price:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"font-semibold text-foreground",children:[r.currency||"PKR"," ",(()=>{if(r.custom_price)return r.custom_price.toFixed(2);return(({shared:5,semi_private:10,private:15}[r.subscription_type]||5)*({"1_month":1,"3_months":2.5,"6_months":4.5,"1_year":8,"2_years":14,lifetime:25}[r.subscription_period]||1)).toFixed(2)})()]}),r.custom_price&&e.jsx("span",{className:"text-xs text-blue-500 bg-blue-50 px-2 py-1 rounded",children:"Custom"})]})]}),t?.amount&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Refund Amount:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[r.currency||"PKR"," ",t.amount.toFixed(2)]})]})]})]})},le=()=>{const{userAuthCode:s,subscriptions:t,signOut:m,refreshSubscriptions:u}=X(),[p,b]=r.useState(null),[f,g]=r.useState(!1),[j,v]=r.useState(!1),[k,q]=r.useState([]),[z,D]=r.useState(!1),[A,E]=r.useState([]),[I,T]=r.useState(!1),O=async()=>{if(s)try{D(!0);const{data:e,error:r}=await a.from("user_subscriptions").select("\n          *,\n          product:products(\n            id,\n            name,\n            slug,\n            description,\n            main_image_url,\n            category\n          ),\n          subscription_refund_requests(\n            id,\n            subscription_id,\n            reason,\n            description,\n            status,\n            admin_notes,\n            refund_amount,\n            refund_method,\n            processed_at,\n            created_at\n          )\n        ").eq("user_auth_code_id",s.id).in("status",["expired","cancelled"]).order("expiry_date",{ascending:!1});if(r)return;q(e||[])}catch(e){}finally{D(!1)}},U=async()=>{if(s)try{T(!0);const{data:e,error:r}=await a.from("product_codes").select("\n          *,\n          product:products(\n            id,\n            name,\n            category\n          )\n        ").eq("user_auth_code_id",s.id).order("created_at",{ascending:!1});if(r)throw r;E(e||[])}catch(e){}finally{T(!1)}};r.useEffect(()=>{s&&(O(),U())},[s]);const B=t.filter(e=>"active"===e.status),J=t.filter(e=>"expiring_soon"===e.status),Q=t.filter(e=>"expired"===e.status);return s?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-card/30 to-background relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-brand-teal/10 rounded-full blur-3xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-brand-purple/5 rounded-full blur-3xl animate-pulse delay-500"})]}),e.jsx("div",{className:"bg-card/95 backdrop-blur-md shadow-xl border-b border-border/50 relative z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary via-brand-teal to-brand-purple bg-clip-text text-transparent",children:"Subscription Dashboard"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your active subscriptions"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:async()=>{v(!0),await u(),await O(),await U(),v(!1)},disabled:j,className:"border-border text-foreground hover:bg-primary/10 hover:border-primary/50 transition-all duration-300",children:[e.jsx(Y,{className:"w-4 h-4 mr-2 "+(j?"animate-spin":"")}),"Refresh"]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:m,className:"border-border text-foreground hover:bg-destructive/10 hover:border-destructive/50 transition-all duration-300",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative z-10",children:[e.jsx(o,{className:"mb-8 bg-card/95 backdrop-blur-md shadow-xl border-border/50",children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"w-14 h-14 bg-gradient-to-br from-primary/20 to-brand-teal/20 rounded-full flex items-center justify-center shadow-lg border border-primary/30 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 to-brand-teal/10 rounded-full animate-pulse"}),e.jsx(S,{className:"w-7 h-7 text-primary relative z-10 drop-shadow-[0_0_8px_rgba(34,197,94,0.4)]"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:s.user_name}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mt-1",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),s.user_email]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(o,{className:"bg-card/95 backdrop-blur-md shadow-xl border-border/50 hover:shadow-2xl hover:border-primary/30 transition-all duration-300 group",children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary/20 to-primary/10 rounded-full flex items-center justify-center mr-4 shadow-lg border border-primary/30 group-hover:scale-110 transition-transform duration-300",children:e.jsx(F,{className:"w-5 h-5 text-primary drop-shadow-[0_0_6px_rgba(34,197,94,0.4)]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold text-primary",children:B.length})]})]})})}),e.jsx(o,{className:"bg-card/95 backdrop-blur-md shadow-xl border-border/50 hover:shadow-2xl hover:border-yellow-500/30 transition-all duration-300 group",children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-500/20 to-yellow-500/10 rounded-full flex items-center justify-center mr-4 shadow-lg border border-yellow-500/30 group-hover:scale-110 transition-transform duration-300",children:e.jsx(L,{className:"w-5 h-5 text-yellow-500 drop-shadow-[0_0_6px_rgba(234,179,8,0.4)]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Expiring Soon"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-500",children:J.length})]})]})})}),e.jsx(o,{className:"bg-card/95 backdrop-blur-md shadow-xl border-border/50 hover:shadow-2xl hover:border-red-500/30 transition-all duration-300 group",children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500/20 to-red-500/10 rounded-full flex items-center justify-center mr-4 shadow-lg border border-red-500/30 group-hover:scale-110 transition-transform duration-300",children:e.jsx(H,{className:"w-5 h-5 text-red-500 drop-shadow-[0_0_6px_rgba(239,68,68,0.4)]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Expired"}),e.jsx("p",{className:"text-3xl font-bold text-red-500",children:Q.length})]})]})})}),e.jsx(o,{className:"bg-card/95 backdrop-blur-md shadow-xl border-border/50 hover:shadow-2xl hover:border-muted/30 transition-all duration-300 group",children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-muted/20 to-muted/10 rounded-full flex items-center justify-center mr-4 shadow-lg border border-muted/30 group-hover:scale-110 transition-transform duration-300",children:e.jsx(W,{className:"w-5 h-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Past Subscriptions"}),e.jsx("p",{className:"text-3xl font-bold text-muted-foreground",children:k.length})]})]})})})]}),e.jsxs(w,{defaultValue:"active",className:"w-full",children:[e.jsx("div",{className:"overflow-x-auto scrollbar-hide",children:e.jsxs(y,{className:"inline-flex w-max min-w-full h-auto p-1 bg-card/95 backdrop-blur-md shadow-xl border-border/50 rounded-md",children:[e.jsxs(_,{value:"active",className:"flex items-center justify-center space-x-2 text-xs sm:text-sm px-3 py-2 whitespace-nowrap flex-shrink-0",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{children:"Active Subscriptions"}),e.jsx(R,{variant:"secondary",className:"ml-2",children:B.length+J.length})]}),e.jsxs(_,{value:"pending",className:"flex items-center justify-center space-x-2 text-xs sm:text-sm px-3 py-2 whitespace-nowrap flex-shrink-0",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{children:"Pending Products"}),e.jsx(R,{variant:"secondary",className:"ml-2",children:A.filter(e=>"pending"===e.status).length})]}),e.jsxs(_,{value:"past",className:"flex items-center justify-center space-x-2 text-xs sm:text-sm px-3 py-2 whitespace-nowrap flex-shrink-0",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{children:"Past Subscriptions"}),e.jsx(R,{variant:"secondary",className:"ml-2",children:k.length})]})]})}),e.jsx(C,{value:"active",className:"mt-6",children:0===t.length?e.jsx(o,{className:"bg-card/95 backdrop-blur-md shadow-xl border-border/50",children:e.jsxs(d,{className:"pt-8 pb-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-muted/20 to-muted/10 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border border-muted/30",children:e.jsx($,{className:"w-10 h-10 text-muted-foreground"})}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-3",children:"No Active Subscriptions"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"You don't have any active subscriptions at the moment. Contact support to get started."}),e.jsxs(c,{variant:"outline",onClick:()=>window.open("mailto:support@toolsy.store"),className:"border-border text-foreground hover:bg-primary/10 hover:border-primary/50 transition-all duration-300",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Contact Support"]})]})}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:t.map(r=>e.jsx(o,{className:"overflow-hidden bg-card/95 backdrop-blur-md shadow-xl border-border/50 hover:shadow-2xl hover:border-primary/30 transition-all duration-300",children:e.jsx(d,{className:"p-0",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"w-full h-48 flex-shrink-0",children:r.product?.main_image_url?e.jsx("img",{src:r.product.main_image_url,alt:r.product.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-muted/20 to-muted/10 flex items-center justify-center",children:e.jsx($,{className:"w-12 h-12 text-muted-foreground"})})}),e.jsxs("div",{className:"flex-1 p-6 flex flex-col",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:r.product?.name||"Unknown Product"}),e.jsx("p",{className:"text-muted-foreground mb-4 text-sm line-clamp-2",children:r.product?.description||"No description available"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx(R,{variant:"outline",className:"border-border text-foreground text-xs",children:r.product?.category}),e.jsxs(R,{variant:"secondary",className:"capitalize bg-primary/20 text-primary border-primary/30 text-xs",children:[r.subscription_type.replace("_"," ")," Plan"]}),e.jsx(R,{variant:"outline",className:"capitalize border-border text-foreground text-xs",children:r.subscription_period.replace("_"," ")})]}),e.jsx(ae,{status:r.status,expiryDate:r.expiry_date,customPrice:r.custom_price,subscriptionType:r.subscription_type,subscriptionPeriod:r.subscription_period,currency:r.currency||"PKR"}),e.jsx(te,{username:r.username,password:r.password,className:"mt-4"})]}),e.jsxs("div",{className:"mt-4 flex flex-col space-y-2",children:["active"===r.status&&e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>(e=>{b(e),g(!0)})(r),className:"border-border text-foreground hover:bg-primary/10 hover:border-primary/50 transition-all duration-300 w-full",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Request Refund"]}),"expiring_soon"===r.status&&e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>window.open("mailto:support@toolsy.store?subject=Subscription Renewal"),className:"border-yellow-500/50 text-yellow-500 hover:bg-yellow-500/10 hover:border-yellow-500/70 transition-all duration-300 w-full",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Renew Subscription"]}),"expired"===r.status&&e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>window.open("mailto:support@toolsy.store?subject=Subscription Reactivation"),className:"border-red-500/50 text-red-500 hover:bg-red-500/10 hover:border-red-500/70 transition-all duration-300 w-full",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Reactivate"]})]})]})]})})},r.id))})}),e.jsx(C,{value:"pending",className:"mt-6",children:I?e.jsx(o,{className:"bg-card/95 backdrop-blur-md shadow-xl border-border/50",children:e.jsxs(d,{className:"pt-8 pb-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-muted/20 to-muted/10 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border border-muted/30",children:e.jsx(Y,{className:"w-10 h-10 text-muted-foreground animate-spin"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Loading Product Codes..."}),e.jsx("p",{className:"text-muted-foreground",children:"Fetching your pending product requests"})]})}):0===A.length?e.jsx(o,{className:"bg-card/95 backdrop-blur-md shadow-xl border-border/50",children:e.jsxs(d,{className:"pt-8 pb-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-muted/20 to-muted/10 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border border-muted/30",children:e.jsx(K,{className:"w-10 h-10 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Pending Products"}),e.jsx("p",{className:"text-muted-foreground",children:"You don't have any pending product requests at the moment"})]})}):e.jsx("div",{className:"space-y-4",children:A.map(r=>e.jsxs(o,{className:"bg-card/95 backdrop-blur-md shadow-xl border-border/50",children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(n,{className:"flex items-center gap-2",children:[r.product.name,"pending"===r.status&&e.jsxs(R,{variant:"outline",className:"text-amber-600 border-amber-300",children:[e.jsx(V,{className:"w-3 h-3 mr-1"}),"Pending Approval"]}),"approved"===r.status&&e.jsxs(R,{className:"bg-green-600",children:[e.jsx(F,{className:"w-3 h-3 mr-1"}),"Approved"]}),"rejected"===r.status&&e.jsxs(R,{variant:"destructive",children:[e.jsx(H,{className:"w-3 h-3 mr-1"}),"Rejected"]})]}),e.jsxs(i,{children:[r.subscription_type," - ",r.subscription_period]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium",children:[r.currency," ",r.price.toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(r.created_at).toLocaleDateString()})]})]})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Product Code:"}),e.jsx("code",{className:"bg-muted px-2 py-1 rounded font-mono text-sm",children:r.product_code}),e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>navigator.clipboard.writeText(r.product_code),children:e.jsx(M,{className:"w-3 h-3"})})]}),"pending"===r.status&&e.jsxs(x,{children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx(h,{children:"This product code is pending admin approval. Send it to our WhatsApp for activation."})]}),"rejected"===r.status&&r.admin_notes&&e.jsxs(x,{variant:"destructive",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsxs(h,{children:[e.jsx("strong",{children:"Rejected:"})," ",r.admin_notes]})]}),"approved"===r.status&&e.jsxs(x,{className:"border-green-200 bg-green-50",children:[e.jsx(F,{className:"h-4 w-4 text-green-600"}),e.jsx(h,{className:"text-green-800",children:"This product has been approved and should now appear in your active subscriptions."})]})]})})]},r.id))})}),e.jsx(C,{value:"past",className:"mt-6",children:z?e.jsx(o,{className:"bg-card/95 backdrop-blur-md shadow-xl border-border/50",children:e.jsxs(d,{className:"pt-8 pb-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-muted/20 to-muted/10 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border border-muted/30",children:e.jsx(Y,{className:"w-10 h-10 text-muted-foreground animate-spin"})}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-3",children:"Loading Past Subscriptions"}),e.jsx("p",{className:"text-muted-foreground",children:"Please wait while we fetch your subscription history..."})]})}):0===k.length?e.jsx(o,{className:"bg-card/95 backdrop-blur-md shadow-xl border-border/50",children:e.jsxs(d,{className:"pt-8 pb-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-muted/20 to-muted/10 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border border-muted/30",children:e.jsx(W,{className:"w-10 h-10 text-muted-foreground"})}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-3",children:"No Past Subscriptions"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"You don't have any expired or cancelled subscriptions in your history."})]})}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:k.map(r=>e.jsx(o,{className:"overflow-hidden bg-card/95 backdrop-blur-md shadow-xl border-border/50 hover:shadow-2xl hover:border-muted/30 transition-all duration-300",children:e.jsx(d,{className:"p-0",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"w-full h-48 flex-shrink-0",children:r.product?.main_image_url?e.jsx("img",{src:r.product.main_image_url,alt:r.product.name,className:"w-full h-full object-cover grayscale opacity-75"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-muted/20 to-muted/10 flex items-center justify-center",children:e.jsx($,{className:"w-12 h-12 text-muted-foreground"})})}),e.jsxs("div",{className:"flex-1 p-6 flex flex-col",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:r.product?.name||"Unknown Product"}),e.jsx("p",{className:"text-muted-foreground mb-4 text-sm line-clamp-2",children:r.product?.description||"No description available"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx(R,{variant:"outline",className:"border-border text-foreground text-xs",children:r.product?.category}),e.jsxs(R,{variant:"secondary",className:"capitalize bg-muted/20 text-muted-foreground border-muted/30 text-xs",children:[r.subscription_type.replace("_"," ")," Plan"]}),e.jsx(R,{variant:"outline",className:"capitalize border-border text-foreground text-xs",children:r.subscription_period.replace("_"," ")})]}),e.jsx(oe,{subscription:r}),e.jsx(te,{username:r.username,password:r.password,className:"mt-4"})]}),e.jsxs("div",{className:"mt-4 flex flex-col space-y-2",children:["expired"===r.status&&e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>window.open("mailto:support@toolsy.store?subject=Subscription Reactivation"),className:"border-border text-foreground hover:bg-primary/10 hover:border-primary/50 transition-all duration-300 w-full",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Reactivate"]}),r.refund_requests&&r.refund_requests.length>0&&e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>window.open("mailto:support@toolsy.store?subject=Refund Status Inquiry"),className:"border-border text-foreground hover:bg-primary/10 hover:border-primary/50 transition-all duration-300 w-full",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"View Refund Status"]})]})]})]})})},r.id))})})]}),e.jsxs(o,{className:"mt-8 bg-card/95 backdrop-blur-md shadow-xl border-border/50",children:[e.jsxs(l,{children:[e.jsx(n,{className:"text-foreground",children:"Need Help?"}),e.jsx(i,{className:"text-muted-foreground",children:"If you have any questions about your subscriptions or need assistance"})]}),e.jsx(d,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(c,{variant:"outline",onClick:()=>window.open("mailto:support@toolsy.store?subject=Subscription Support"),className:"border-border text-foreground hover:bg-primary/10 hover:border-primary/50 transition-all duration-300",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Contact Support"]}),e.jsxs(c,{variant:"outline",onClick:()=>window.open("mailto:support@toolsy.store?subject=Refund Request"),className:"border-border text-foreground hover:bg-primary/10 hover:border-primary/50 transition-all duration-300",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Request Refund"]})]})})]})]}),f&&p&&e.jsx(se,{subscription:p,isOpen:f,onClose:()=>{g(!1),b(null)}})]}):null},ne=()=>{const{isAuthenticated:r,isLoading:s}=X();return s?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):r?e.jsx(le,{}):e.jsx(ee,{})};
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function ie(){return e.jsx(Q,{children:e.jsx(ne,{})})}export{ie as default};
